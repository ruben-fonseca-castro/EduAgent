<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Introduction to Probability for Computer Science — Astra</title>

  <!-- CDN Dependencies -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.plot.ly/plotly-2.35.2.min.js" charset="utf-8"></script>
  <script>
    MathJax = {
      tex: { inlineMath: [['$', '$']], displayMath: [['$$', '$$']] },
      svg: { fontCache: 'global' }
    };
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-svg.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.min.js"></script>

  <style>
    /* Reading progress bar */
    #progress-bar {
      position: fixed;
      top: 0; left: 0;
      height: 3px;
      background: linear-gradient(90deg, #FFCB05, #D50032);
      z-index: 100;
      transition: width 0.1s linear;
    }

    /* Callout boxes */
    .callout {
      border-left: 4px solid;
      padding: 1rem 1.25rem;
      margin: 1.25rem 0;
      border-radius: 0 0.5rem 0.5rem 0;
    }
    .callout-info {
      background: #eff6ff;
      border-color: #00274C;
    }
    .callout-exercise {
      background: #fefce8;
      border-color: #FFCB05;
    }
    .callout-warning {
      background: #fff1f2;
      border-color: #D50032;
    }

    /* Code blocks */
    pre {
      background: #1e1e2e;
      color: #cdd6f4;
      padding: 1rem 1.25rem;
      border-radius: 0.5rem;
      overflow-x: auto;
      font-size: 0.875rem;
      line-height: 1.6;
    }
    code:not(pre code) {
      background: #f3f4f6;
      padding: 0.1rem 0.3rem;
      border-radius: 0.25rem;
      font-size: 0.875em;
      color: #00274C;
    }

    /* Mermaid diagrams */
    .mermaid {
      background: #f9fafb;
      border-radius: 0.5rem;
      padding: 1rem;
      margin: 1rem 0;
      text-align: center;
    }

    /* Active section nav */
    .nav-link.active {
      background: #FFCB0520;
      color: #00274C;
      font-weight: 600;
      border-left: 3px solid #FFCB05;
    }

    /* Smooth scroll */
    html { scroll-behavior: smooth; }

    /* Section cards */
    .section-card {
      scroll-margin-top: 5rem;
    }

    /* MathJax display */
    .mathjax-equation {
      text-align: center;
      margin: 1.5rem 0;
      overflow-x: auto;
    }

    /* Prose styling */
    .prose h3 { font-size: 1.125rem; font-weight: 700; margin-top: 1.25rem; margin-bottom: 0.5rem; color: #00274C; }
    .prose h4 { font-size: 1rem; font-weight: 600; margin-top: 1rem; margin-bottom: 0.25rem; color: #1e293b; }
    .prose p { margin-bottom: 0.75rem; line-height: 1.7; }
    .prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 0.75rem; }
    .prose li { margin-bottom: 0.25rem; line-height: 1.6; }
    .prose strong { color: #00274C; }
    .prose blockquote { border-left: 3px solid #FFCB05; padding-left: 1rem; margin: 1rem 0; color: #475569; font-style: italic; }
  </style>
</head>
<body class="bg-gray-50 text-gray-900" onscroll="updateProgress()">

  <!-- Reading progress bar -->
  <div id="progress-bar" style="width: 0%"></div>

  <!-- Sticky Header -->
  <header class="sticky top-0 z-50 border-b border-gray-200 shadow-sm" style="background: #00274C;">
    <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
      <div>
        <div class="flex items-center gap-2">
          <span class="text-2xl">&#x2B50;</span>
          <h1 class="text-xl font-bold text-white">Introduction to Probability for Computer Science</h1>
        </div>
        <div class="flex items-center gap-3 mt-0.5 text-sm" style="color: #FFCB05;">
          <span>Computer Science</span>
          <span style="opacity: 0.5;">&#x2022;</span>
          <span>Undergraduate</span>
          <span style="opacity: 0.5;">&#x2022;</span>
          <span>25 min</span>
          <span style="opacity: 0.5;">&#x2022;</span>
          <span>Student6</span>
        </div>
      </div>
      <div class="text-right text-xs" style="color: rgba(255,255,255,0.6);">
        <div>Generated by Astra</div>
        <div>February 20, 2026</div>
      </div>
    </div>
  </header>

  <!-- Main Layout -->
  <div class="max-w-7xl mx-auto px-4 py-6">
    <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">

      <!-- Sidebar -->
      <aside class="lg:col-span-1">
        <div class="sticky top-24 space-y-4">

          <!-- Learning Objectives -->
          <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-4">
            <h2 class="font-semibold text-gray-800 mb-3 flex items-center gap-2">
              <span>&#x1F3AF;</span> Learning Objectives
            </h2>
            <ul class="space-y-2">
              
              <li class="flex gap-2 text-sm text-gray-600">
                <span class="mt-0.5 flex-shrink-0" style="color: #FFCB05;">&#x2713;</span>
                <span>Understand the foundations of probability theory and its applications in computer science.</span>
              </li>
              
              <li class="flex gap-2 text-sm text-gray-600">
                <span class="mt-0.5 flex-shrink-0" style="color: #FFCB05;">&#x2713;</span>
                <span>Analyze and model uncertainty using probability distributions.</span>
              </li>
              
              <li class="flex gap-2 text-sm text-gray-600">
                <span class="mt-0.5 flex-shrink-0" style="color: #FFCB05;">&#x2713;</span>
                <span>Apply probabilistic reasoning to randomized algorithms and machine learning systems.</span>
              </li>
              
              <li class="flex gap-2 text-sm text-gray-600">
                <span class="mt-0.5 flex-shrink-0" style="color: #FFCB05;">&#x2713;</span>
                <span>Simulate stochastic processes and understand their behavior.</span>
              </li>
              
            </ul>
          </div>

          <!-- Section Navigation -->
          <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-4">
            <h2 class="font-semibold text-gray-800 mb-3 flex items-center gap-2">
              <span>&#x1F4CB;</span> Sections
            </h2>
            <nav class="space-y-1">
              
              <a href="#section-0"
                 class="nav-link block px-3 py-2 rounded-lg text-sm text-gray-600 hover:bg-gray-100 transition-colors"
                 data-section="0">
                <span class="text-gray-400 mr-1">1.</span>
                Foundations of Probability
              </a>
              
              <a href="#section-1"
                 class="nav-link block px-3 py-2 rounded-lg text-sm text-gray-600 hover:bg-gray-100 transition-colors"
                 data-section="1">
                <span class="text-gray-400 mr-1">2.</span>
                Discrete Random Variables and Distributions
              </a>
              
              <a href="#section-2"
                 class="nav-link block px-3 py-2 rounded-lg text-sm text-gray-600 hover:bg-gray-100 transition-colors"
                 data-section="2">
                <span class="text-gray-400 mr-1">3.</span>
                Probabilistic Algorithms
              </a>
              
              <a href="#section-3"
                 class="nav-link block px-3 py-2 rounded-lg text-sm text-gray-600 hover:bg-gray-100 transition-colors"
                 data-section="3">
                <span class="text-gray-400 mr-1">4.</span>
                Application: Naive Bayes Classifier
              </a>
              
            </nav>
          </div>

          <!-- Progress -->
          <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-4">
            <h2 class="font-semibold text-gray-800 mb-2 flex items-center gap-2">
              <span>&#x1F4CA;</span> Your Progress
            </h2>
            <div class="bg-gray-200 rounded-full h-2">
              <div id="lesson-progress" class="h-2 rounded-full transition-all" style="width: 0%; background: linear-gradient(90deg, #FFCB05, #D50032);"></div>
            </div>
            <p class="text-xs text-gray-500 mt-1.5">
              <span id="progress-pct">0</span>% complete
            </p>
          </div>

        </div>
      </aside>

      <!-- Content Area -->
      <main class="lg:col-span-3 space-y-6">

        
        <div id="section-0" class="section-card bg-white rounded-xl shadow-sm border border-gray-200 p-6">

          <!-- Section Header -->
          <div class="flex items-center gap-3 mb-4 pb-3 border-b border-gray-100">
            <span class="flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center text-sm font-bold text-white" style="background: #00274C;">
              1
            </span>
            <div>
              <h2 class="text-xl font-bold text-gray-900">Foundations of Probability</h2>
              
              <span class="text-xs text-gray-400 uppercase tracking-wide">TEXT</span>
              
            </div>
          </div>

          <!-- Section Content -->
          <div class="prose max-w-none">
            <h2>Foundations of Probability</h2>
<p>Well, y'all, let's dive into the world of probability, where we'll be wranglin' uncertainty like a true cowboy. We'll start with the basics: <strong>sample spaces</strong> and <strong>events</strong>, which are like the corral and the cattle, if you will. The <strong>axioms of probability</strong> are our rules of the range, tellin' us how to calculate the likelihood of events. We'll also explore <strong>conditional probability</strong>, <em>"What's the chance of rain, given that it's cloudy?"</em>, and <strong>Bayes' Theorem</strong>, a powerful tool for updatin' our beliefs based on new evidence.</p>
<div class="callout callout-info">
<p>Key Concept: Probability is like a weather forecast – it doesn't tell us what will happen, but it gives us an idea of what's likely.</p>
</div>
<p>Now, let's talk about <strong>independence</strong> and the <strong>Law of Total Probability</strong>. These concepts are crucial for understandin' how events relate to each other. We'll apply these ideas to real-world scenarios, like spam filterin' and fault detection, where probability is the sheriff keepin' things in order.</p>
<h3>Exercise</h3>
<p>Calculate the probability of drawin' a red ball from a bag with 5 red balls and 10 blue balls, usin' the axioms of probability. Show your work, sugar!</p>
          </div>

          <!-- Figures for this section -->
          

        </div>
        
        <div id="section-1" class="section-card bg-white rounded-xl shadow-sm border border-gray-200 p-6">

          <!-- Section Header -->
          <div class="flex items-center gap-3 mb-4 pb-3 border-b border-gray-100">
            <span class="flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center text-sm font-bold text-white" style="background: #00274C;">
              2
            </span>
            <div>
              <h2 class="text-xl font-bold text-gray-900">Discrete Random Variables and Distributions</h2>
              
              <span class="text-xs text-gray-400 uppercase tracking-wide">TEXT + PLOTLY FIGURE</span>
              
            </div>
          </div>

          <!-- Section Content -->
          <div class="prose max-w-none">
            <h2>Discrete Random Variables and Distributions</h2>
<p>Alrighty, now that we've got the basics down, let's mosey on over to <strong>discrete random variables</strong>. These are like the different types of cattle on our ranch, each with its own characteristics. We'll learn about <strong>probability mass functions (PMF)</strong> and <strong>cumulative distribution functions (CDF)</strong>, which describe the likelihood of each outcome.</p>
<p>We'll also explore important concepts like <strong>expectation</strong> and <strong>variance</strong>, which give us a sense of the average and spread of our random variables. Common distributions like <strong>Bernoulli</strong>, <strong>Binomial</strong>, and <strong>Geometric</strong> will be our focus, as they're widely used in computer science.</p>
<h3>Exercise</h3>
<p>Simulate a Binomial distribution with <code>n=10</code> and <code>p=0.5</code> using Python, and plot its PMF. We'll use Plotly to visualize the results, so y'all can see the shape and properties of this distribution.</p>
<h3>Figure</h3>
<p>Here's a Plotly histogram of a Binomial distribution (<code>n=10</code>, <code>p=0.5</code>) to help y'all visualize its properties:</p>
<pre>
# Plotly code for Binomial distribution histogram
import plotly.express as px
import numpy as np

data = np.random.binomial(n=10, p=0.5, size=1000)
fig = px.histogram(data, nbins=11, title='Binomial Distribution (n=10, p=0.5)')
fig.show()
</pre>
          </div>

          <!-- Figures for this section -->
          
          <div class="mt-6">
            
            <div class="rounded-lg overflow-hidden border border-gray-200">
              <div class="px-4 py-2 border-b border-gray-200" style="background: #00274C10;">
                <h3 class="text-sm font-semibold" style="color: #00274C;">&#x1F4C8; Histogram of a Binomial distribution with n=10 and p=0.5. Th</h3>
              </div>
              <div id="plotly-31b5e3fc" style="min-height: 400px;"></div>
            </div>

            
          </div>
          

        </div>
        
        <div id="section-2" class="section-card bg-white rounded-xl shadow-sm border border-gray-200 p-6">

          <!-- Section Header -->
          <div class="flex items-center gap-3 mb-4 pb-3 border-b border-gray-100">
            <span class="flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center text-sm font-bold text-white" style="background: #00274C;">
              3
            </span>
            <div>
              <h2 class="text-xl font-bold text-gray-900">Probabilistic Algorithms</h2>
              
              <span class="text-xs text-gray-400 uppercase tracking-wide">CODE</span>
              
            </div>
          </div>

          <!-- Section Content -->
          <div class="prose max-w-none">
            <h2>Probabilistic Algorithms</h2>
<p>Now, let's get our hands dirty with some <strong>probabilistic algorithms</strong>. We'll focus on <strong>quicksort</strong> and <strong>retry algorithms</strong>, which use randomness to improve their performance. Quicksort, for instance, chooses a random pivot to avoid worst-case scenarios, while retry algorithms use probability to determine when to retry a failed operation.</p>
<h3>Exercise</h3>
<p>Implement a randomized quicksort algorithm in Python and compare its runtime to the deterministic version. Show your code and results, darlin'!</p>
<h3>Code Example</h3>
<p>Here's a Python implementation of a retry mechanism using the Geometric distribution:</p>
<pre>
import random

def retry_mechanism(p, max_retries):
    retries = 0
    while retries &lt; max_retries:
        if random.random() &lt; p:
            return True  # Success!
        retries += 1
    return False  # Failed after max_retries
</pre>
<p>This code demonstrates how probability can be used to model real-world scenarios, like network requests or database queries.</p>
          </div>

          <!-- Figures for this section -->
          

        </div>
        
        <div id="section-3" class="section-card bg-white rounded-xl shadow-sm border border-gray-200 p-6">

          <!-- Section Header -->
          <div class="flex items-center gap-3 mb-4 pb-3 border-b border-gray-100">
            <span class="flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center text-sm font-bold text-white" style="background: #00274C;">
              4
            </span>
            <div>
              <h2 class="text-xl font-bold text-gray-900">Application: Naive Bayes Classifier</h2>
              
              <span class="text-xs text-gray-400 uppercase tracking-wide">LAB</span>
              
            </div>
          </div>

          <!-- Section Content -->
          <div class="prose max-w-none">
            <h2>Application: Naive Bayes Classifier</h2>
<p>Alrighty, it's time to put our probability skills to work with a hands-on lab. We'll implement a <strong>Naive Bayes classifier</strong> for a simple text classification task, like spam detection. This is where the rubber meets the road, y'all!</p>
<p>We'll preprocess our data, train our model, and evaluate its performance. Along the way, we'll encounter challenges like <strong>zero probabilities</strong>, which can be handled using <strong>smoothing techniques</strong>.</p>
<h3>Exercise</h3>
<p>Experiment with different smoothing techniques, like Laplace smoothing or Lidstone smoothing, to handle zero probabilities in your Naive Bayes classifier. Compare the results and see which technique works best for your data.</p>
<p>Remember, sugar, the key to success is to keep tinkerin' and learnin' from your mistakes. So, don't be afraid to get your hands dirty and try out different approaches. Happy codin'!</p>
          </div>

          <!-- Figures for this section -->
          

        </div>
        

        <!-- Completion card -->
        <div class="rounded-xl border p-6 text-center" style="background: linear-gradient(135deg, #00274C08, #FFCB0515); border-color: #FFCB05;">
          <div class="text-4xl mb-3">&#x1F389;</div>
          <h2 class="text-xl font-bold mb-2" style="color: #00274C;">Lesson Complete!</h2>
          <p style="color: #00274C;">You've finished <strong>Introduction to Probability for Computer Science</strong>.</p>
          <p class="text-sm mt-2" style="color: #00274Caa;">
            Review your notes, then start teaching to solidify your understanding.
          </p>
          <button onclick="window.parent.postMessage({type:'LESSON_COMPLETE'},'*')"
                  class="mt-4 inline-block text-white px-6 py-3 rounded-xl font-semibold hover:opacity-90 transition-opacity cursor-pointer"
                  style="background: linear-gradient(135deg, #D50032, #00274C);">
            I'm Ready to Teach &rarr;
          </button>
        </div>

      </main>
    </div>
  </div>

  <!-- Plotly Figure Data + Interactivity -->
  <script>
    // Embedded figure data (all_figures as JSON)
    const figureData = [{"data": "{\"data\": [{\"type\": \"scatter\", \"x\": [0.0, 0.20408163265306123, 0.40816326530612246, 0.6122448979591837, 0.8163265306122449, 1.0204081632653061, 1.2244897959183674, 1.4285714285714286, 1.6326530612244898, 1.836734693877551, 2.0408163265306123, 2.2448979591836737, 2.4489795918367347, 2.6530612244897958, 2.857142857142857, 3.0612244897959187, 3.2653061224489797, 3.4693877551020407, 3.673469387755102, 3.8775510204081636, 4.081632653061225, 4.285714285714286, 4.4897959183673475, 4.6938775510204085, 4.8979591836734695, 5.1020408163265305, 5.3061224489795915, 5.510204081632653, 5.714285714285714, 5.918367346938775, 6.122448979591837, 6.326530612244898, 6.530612244897959, 6.73469387755102, 6.938775510204081, 7.142857142857143, 7.346938775510204, 7.551020408163265, 7.755102040816327, 7.959183673469388, 8.16326530612245, 8.36734693877551, 8.571428571428571, 8.775510204081632, 8.979591836734695, 9.183673469387756, 9.387755102040817, 9.591836734693878, 9.795918367346939, 10.0], \"y\": [2.0, 1.863342108634686, 1.6059681489322135, 1.2824728068548148, 0.9516103849137466, 0.6665283045416639, 0.4670124490196774, 0.3747382384729089, 0.39193167695864184, 0.5032590199620446, 0.6802742734237495, 0.8874267348271562, 1.0884991901699599, 1.2524094688127918, 1.357531695178972, 1.3940247941532875, 1.364029852650494, 1.2799507531378578, 1.1613107548210233, 1.030846013275591, 0.9105414655279007, 0.8182423179734921, 0.7653104108598039, 0.7555754894296736, 0.7855979143276683, 0.8460501434632303, 0.9238696816339, 1.004754277139422, 1.0755655139671463, 1.1262714286736315, 1.151174215598548, 1.1493113537666109, 1.1240620129083527, 1.08211254350286, 1.0320184374460486, 0.9826365719976394, 0.9416904969481447, 0.9146802124186765, 0.9042690630716291, 0.9101896732507204, 0.9296239726591776, 0.957942604683484, 0.9896454229605302, 1.0193312396700216, 1.0425401692858947, 1.0563501044231296, 1.0596613767548282, 1.0531605438967215, 1.039006006748583, 1.0203172095112023], \"mode\": \"lines\", \"name\": \"Pattern A\", \"line\": {\"color\": \"#00274C\", \"width\": 2}}, {\"type\": \"scatter\", \"x\": [0.0, 0.20408163265306123, 0.40816326530612246, 0.6122448979591837, 0.8163265306122449, 1.0204081632653061, 1.2244897959183674, 1.4285714285714286, 1.6326530612244898, 1.836734693877551, 2.0408163265306123, 2.2448979591836737, 2.4489795918367347, 2.6530612244897958, 2.857142857142857, 3.0612244897959187, 3.2653061224489797, 3.4693877551020407, 3.673469387755102, 3.8775510204081636, 4.081632653061225, 4.285714285714286, 4.4897959183673475, 4.6938775510204085, 4.8979591836734695, 5.1020408163265305, 5.3061224489795915, 5.510204081632653, 5.714285714285714, 5.918367346938775, 6.122448979591837, 6.326530612244898, 6.530612244897959, 6.73469387755102, 6.938775510204081, 7.142857142857143, 7.346938775510204, 7.551020408163265, 7.755102040816327, 7.959183673469388, 8.16326530612245, 8.36734693877551, 8.571428571428571, 8.775510204081632, 8.979591836734695, 9.183673469387756, 9.387755102040817, 9.591836734693878, 9.795918367346939, 10.0], \"y\": [0.0, 0.09700730592796991, 0.18460419445253706, 0.2637035448136633, 0.3351296802956041, 0.3996269588015956, 0.4578675300800349, 0.5104583404430469, 0.5579474579761743, 0.6008297841565164, 0.639552211402179, 0.674518280301748, 0.7060923850584782, 0.7346035709756702, 0.7603489635582242, 0.7835968649662867, 0.8045895500902738, 0.8235457913861889, 0.8406631387834667, 0.8561199784251015, 0.8700773916949405, 0.8826808339057493, 0.8940616501422686, 0.9043384440564218, 0.9136183138793861, 0.9219979685314623, 0.9295647354611339, 0.9363974707163732, 0.9425673807323827, 0.9481387643999211, 0.9531696831475804, 0.9577125660211868, 0.9618147560660784, 0.9655190037063105, 0.9688639122624736, 0.971884340251028, 0.9746117646576632, 0.9770746089704886, 0.9792985393916067, 0.9813067323140009, 0.9831201158512101, 0.9847575879368604, 0.9862362132669495, 0.9875714011372899, 0.9887770660294208, 0.9898657726185143, 0.9908488667144537, 0.9917365935006723, 0.9925382043029597, 0.9932620530009145], \"mode\": \"lines\", \"name\": \"Pattern B\", \"line\": {\"color\": \"#D50032\", \"width\": 2, \"dash\": \"dash\"}}], \"layout\": {\"title\": {\"text\": \"Histogram of a Binomial distribution with n=10 and p=0.5. The x-axis should repr\", \"font\": {\"size\": 16}}, \"xaxis\": {\"title\": \"Input\"}, \"yaxis\": {\"title\": \"Output\"}, \"template\": \"plotly_white\", \"showlegend\": true}}", "figure_id": "31b5e3fc", "figure_type": "plotly", "section_index": 1, "title": "Histogram of a Binomial distribution with n=10 and p=0.5. Th"}];

    document.addEventListener('DOMContentLoaded', async function() {
      // Initialize Mermaid
      mermaid.initialize({ startOnLoad: false, theme: 'default' });

      // Render Mermaid diagrams manually to catch errors
      const mermaidNodes = document.querySelectorAll('.mermaid');
      for (let i = 0; i < mermaidNodes.length; i++) {
        const el = mermaidNodes[i];
        try {
          const { svg } = await mermaid.render('mermaid-svg-' + i, el.textContent);
          el.innerHTML = svg;
        } catch (e) {
          el.innerHTML = '<div class="p-4 text-red-500 text-sm">Could not render diagram.</div>';
        }
      }

      // Render Plotly figures
      figureData.forEach(function(fig) {
        if (fig.figure_type !== 'plotly') return;
        const el = document.getElementById('plotly-' + fig.figure_id);
        if (!el) return;
        try {
          const figJson = typeof fig.data === 'string' ? JSON.parse(fig.data) : fig.data;
          Plotly.react(el, figJson.data || [], figJson.layout || {}, { responsive: true });
        } catch (e) {
          el.innerHTML = '<div class="p-4 text-red-500 text-sm">Could not render figure: ' + e.message + '</div>';
        }
      });

      // Section nav highlighting via IntersectionObserver
      const sections = document.querySelectorAll('.section-card');
      const navLinks = document.querySelectorAll('.nav-link');

      const observer = new IntersectionObserver(
        function(entries) {
          entries.forEach(function(entry) {
            if (entry.isIntersecting) {
              navLinks.forEach(function(link) { link.classList.remove('active'); });
              const id = entry.target.id.replace('section-', '');
              const activeLink = document.querySelector('.nav-link[data-section="' + id + '"]');
              if (activeLink) activeLink.classList.add('active');
            }
          });
        },
        { rootMargin: '-20% 0px -60% 0px' }
      );

      sections.forEach(function(section) { observer.observe(section); });
    });

    // Reading progress
    function updateProgress() {
      const scrollTop = window.scrollY;
      const docHeight = document.documentElement.scrollHeight - window.innerHeight;
      const pct = docHeight > 0 ? Math.round((scrollTop / docHeight) * 100) : 0;
      document.getElementById('progress-bar').style.width = pct + '%';
      document.getElementById('lesson-progress').style.width = pct + '%';
      document.getElementById('progress-pct').textContent = pct;
    }
  </script>

</body>
</html>